<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Task 7: finally: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="act.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Task 7: finally
   &#160;<span id="projectnumber">6.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Task 7: finally Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Singleton &amp; Exceptions</h2>
<p>For this assignment you must write a program from scratch. Only the <a class="el" href="asserts_8h.html" title="This file defines various macro&#39;s that can be used as checks in your program. ">asserts.h</a> file and it's supporting files are given. Read the entire assignment before you start coding.</p>
<p>Develop the program in the following three steps. The names of classes and methods shown are just examples, they are not mandatory.</p>
<h4>Step 1</h4>
<p>Implement the <b>singleton</b> class Union (or maybe Bond: the <em>Branche</em> <em>Organisatie</em> <em>Nederlandse</em> <em>Dierentuinen</em>) which represents the Dutch Zoo Union.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> Union* Union::getTheUnion(); </div></div><!-- fragment --><p> or (whatever your prefer) </p><div class="fragment"><div class="line"><span class="keyword">static</span> Union&amp; Union::getTheUnion(); </div></div><!-- fragment --><p>The zoo union issues tickets (class Ticket) via: </p><div class="fragment"><div class="line"><span class="keyword">class </span>Ticket* Union::getTicket(<span class="keywordtype">int</span> n); <span class="comment">// make a ticket </span></div></div><!-- fragment --><p> Each ticket can be used up to <em>n</em> times (the credit), for instance for a group of <em>n</em> people, or a single person visiting <em>n</em> zoos one at a time, or any combination of this. The parameter <em>n</em> should be optional with a default of 1.</p>
<p>Tickets issued have to be registered with the zoo union.</p>
<dl class="section note"><dt>Note</dt><dd>Carefully consider your choice of container class for keeping track of tickets. And how are you going to keep track of the credit of each ticket?</dd></dl>
<p>When somebody wants to visit a zoo the ticket will be checked using: </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> Union::isValidTicket(Ticket*, <span class="keywordtype">int</span> n); <span class="comment">// validate a ticket </span></div></div><!-- fragment --><p> where <em>n</em> is the number of people seeking entrance. The parameter <em>n</em> should be optional with a default of 1.</p>
<p>When <em>n</em> is less or equal to the current credit of the ticket, the value of <em>n</em> is subtracted from that credit, otherwise the ticket is rejected.</p>
<p>When the credit of the ticket reaches zero, the ticket instance should be destroyed.</p>
<p>The method returns <b>true</b> if the visitor(s) should be granted entrance, <b>false</b> otherwise.</p>
<dl class="section note"><dt>Note</dt><dd>Since C++ does not garbage collect for you like java does, don't forget to destroy the expired tickets somewhere, otherwise your program will run out of memory eventually!</dd></dl>
<p>When the program finishes, the Union should report about any remaining unused tickets (and their outstanding credit). Don't forget to destroy those tickets too.</p>
<p>Write a main function to test everything.</p>
<h4>Step 2</h4>
<p>Extend your main function to try and fake tickets e.g. by creating one yourself, copying an existing ticket, etc.. Use your imagination for other ways to commit fraud.</p>
<p>At the same time extend the Union class with code to catch fraudulent tickets.</p>
<dl class="section note"><dt>Note</dt><dd>What will happen when in main you <b>delete</b> a genuine ticket?</dd></dl>
<p>When a fake ticket is detected or somebody tries to enter the zoo with a ticket with insufficient credit, your code should throw exceptions. You should also consider whether it is desirable and/or feasible to detect the situation that somebody, outside the Union, tries to delete a genuine ticket.</p>
<dl class="section note"><dt>Note</dt><dd>Your bond &amp; ticket code should throw at least one exception <b>class</b> instance and one <b>non-class</b> exception (i.e. using some C++ built-in type).</dd></dl>
<p>Extend your main function to catch the various exceptions and briefly report about what happened.</p>
<dl class="section note"><dt>Note</dt><dd>Your catch clauses should also catch exceptions thrown by e.g. the asserts checks and exceptions thrown by the standard library.</dd></dl>
<p>Your program should be able to catch all kinds of exceptions, and at least differentiate between those from the Union itself, the ones thrown by the asserts checks, the ones from the standard library and finally whatever you may have forgotten.</p>
<dl class="section note"><dt>Note</dt><dd>These modifications will have the side effect that the boolean method 'isValidTicket' will now no longer return <b>false</b> (it throws an exception instead), so it's name and type no longer match it's actual behaviour. For now we will ignore this blemish.</dd></dl>
<h4>Step 3</h4>
<p>Use the various features of C++ (introduced during the lecture) that can <b>prevent</b> somebody from makeing fake tickets (or deleting them) and/or making a fake "bond" instance (i.e. ensure the singleton <b>can</b> only be the one and only instance).</p>
<dl class="section note"><dt>Note</dt><dd>Ofcourse this will have the side effect that some of the code you added in step 2 to fake tickets will become illegal. Please surround such code with pre-processor guards like: <div class="fragment"><div class="line"><span class="preprocessor">#if 0</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --> rather then deleting them or turning them into comment.</dd></dl>
<p><br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
